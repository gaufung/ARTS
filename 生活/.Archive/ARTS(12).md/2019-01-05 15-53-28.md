---
date: 2019-01-01
status: draft
tags: ARTS
title: ARTS(12)
---
# 1 Algorithm
>给定 n 个非负整数表示每个宽度为 1 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。
> 

![](./_image/2019-01-01-12-47-57.jpg)
>面是由数组 [0,1,0,2,1,0,1,3,2,1,2,1] 表示的高度图，在这种情况下，可以接 6 个单位的雨水（蓝色部分表示雨水）

$w_i$表示第 $i$ 柱子接到的雨水，那么 $h_i+w_i$ 的值由 $i$ 有左右 $min(h_j, h_K)$ 确定的。因此左右遍历数组两次，取同一位置最小值为$h_i+w_i$.
- 如果从左边考虑，每个柱子的水位应该如下图虚线所示：
![](./_image/2019-01-01-13-05-09.jpg)
- 如果从右边考虑，每个柱子的水位如下图虚线所示:

![](./_image/2019-01-01-13-07-01.jpg)

```go
func trap(height []int) int {
    if len(height) == 0 {
        return 0
    }
    leftHeight := make([]int, len(height))
    rightHeight := make([]int, len(height))
    leftHeight[0] = height[0]
    for i:= 1; i < len(height); i++ {
        if height[i] > leftHeight[i-1] {
            leftHeight[i] = height[i]
        }else{
            leftHeight[i] = leftHeight[i-1]
        }
    }
    rightHeight[len(height) - 1] = height[len(height) -1]
    for j:= len(height) -2 ; j>=0; j-- {
        if height[j] > rightHeight[j+1] {
            rightHeight[j] = height[j]
        }else{
            rightHeight[j] = rightHeight[j+1]
        }
    }
    area := 0
    for i:=0; i < len(height); i++ {
        h := leftHeight[i]
        if h > rightHeight[i] {
            h = rightHeight[i]
        }
        area = area + (h - height[i])
    }
    return area
}
```
# 2 Review
[Inversion Of Control](https://martinfowler.com/bliki/InversionOfControl.html)
当你拓展一个框架的时候，`控制反转`这个概念是一个普遍的概念，而且`控制反转`也是框架的一个特色。
# 3 Tips
在服务端开发中，仅仅单元测试不够的，还需要集成测试，也就是实际过程中开发。
# 4 Share
