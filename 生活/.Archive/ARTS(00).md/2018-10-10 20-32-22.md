---
date: 2018-10-09
status: public
tags: ARTS
title: ARTS(00)
---
# 1 前言
ARTS是耗子叔([陈皓](https://coolshell.cn/haoel)）呼吁的一种学习方法，即每周做出如下的这些事情：
- Algorithm: 研究一个算法；
- Review：阅读一篇英文技术文章；
- Tip: 工作中的一个建议；
- Share: 分享一个观点。

# 2 Algorithm
**Sieve of Eratosthenes** (埃拉托斯特尼筛法)是古老的筛选质数的算法，该算法非常简单，主要流程如下：
1. 从2(最小的素数)开始的整数串，一直到`n`;
2. 首先令`p`等于`2`, 最小的素数；
3. 依次枚举`p`的整数倍，但不包括`p`，直到不大于`n`，将这些数据标记并过滤掉；
4. 在剩下的整数串中，选择比`p`大的最小数，并更新`p`为该值，重复步骤`3`；
5. 直到没有`p`值可以更新，算法结束，剩下的数据都是比`n`小的素数。
算法的正确性证明比较简单；
> 素数只能被`1`和本身整除，因此数据串中的所有素数都会保留下来；而合数(非质数)都可以分解质因数，所以所有的合数都会被筛选掉。

算法的时间复杂度: $O(n log logn)$， 但是算法需要一次次遍历整个数据串，如果`n`非常大，对内存的消耗也是非常大的。因此我们选择一种非常`tricky`的方式来处理：采用延迟生成的方式生成数据串，然后筛选掉每一个合数。
**Scheme** 版
`scheme`中提供了流(`Stream`)数据结构，该数据能够提供延迟计算的功能。
```scheme
;; 整除
(define (diviable? x y)
  (= (remainder x y) 0))
;; 整数流
(define (integers-start-from n)
  (cons-stream n (integers-start-from (+ n 1))))
;; 流过滤
(define (stream-filter pred stream)
  (if (stream-null? stream)
      the-empty-stream
      (if (pred (stream-car stream))
          (cons-stream (stream-car stream)
                       (stream-filter pred
                                      (stream-cdr stream)))
          (stream-fileter pred (stream-cdr stream)))))
;;筛选
(define (sieve stream)
  (cons-stream
   (stream-car stream)
   (sieve (stream-filter
           (lambda (x)
             (not (diviable? x (stream-car stream))))
           (stream-cdr stream)))))
;; 从2开始的素数流
(define primes (sieve (integers-start-from 2)))
```
**Golang**版
`go`语言中的通道(`channel`)也能提供类似的功能，一个通道负责生产整数串，其余的通道负责筛选数据。
```go
func generate(ch chan int){
    for i:=2; ; i++ {
        ch <- i 
    }
}
func filter(in, out chan int, prime int){
    for {
        i := <- in
        if i % prime !=0 {
            out<-i
        }
    }
}
func main(){
    ch := make(chan int)
    go generate(ch)
    for {
        prime := <- ch
        ch1 := make(chan int)
        go filter(ch, ch1, prime)
        ch = ch1
    }
}
```
# 3 Review

# 4 Tip
在实际工作中，我们的代码可能依赖别人的代码，如果使用 *git* 管理我们代码仓库，将源代码直接拷贝到工作的仓库显然是不合理。那么如何进行管理引用的第三方的代码呢？答案就是: `git submodule`。
## 4.1 初始化submodule
为项目添加子模块
```shell
git submodule add https://github.com/gaufung/submodule.git
```


# 5 Share