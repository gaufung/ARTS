---
title: SICP(02)-函数抽象
status: public
date: 2018-09-17
---

# 1 Scheme 基础语法
`Scheme` 属于 `Lisp`的方言，都属于 [`S表达式`](https://zh.wikipedia.org/zh-hans/S-表达式)。如果熟悉编译原理的话，对于`C++`或者`JAVA`中的`1+ 6/2 ` 的表达式，在构建抽象语法树(Abstract Syntax Tree. AST)过程中，会根据操作数，操作符以及操作符之间的优先级构建出 ` (1+( 6/2) ` 的结构。但是在`Scheme`中则完全可以跳过这一步骤，因为其采用前缀表达式，使用括号将操作符所关联的操作数包含起来。那么上述的表达式可以如下表示`(+ 1 (/ 6 2))`, 这也是所说的`Code is data, data is code`，其弊端在于代码中括号噪声多，但是使用相关的插件都能够很好帮助组织代码。
## 1.1 表达式
$\frac{5+4+(2 - (3 - (6 + \frac{4}{5})}{3(6-2)(2-7)}$
```scheme
(/ (+ 5 
      4 
      (- 2 
         (- 3 
            (+ 6 
               (/ 4 5)))))
    (* 3 
       (- 6 2)
       (- 2 7))
   )
```
## 1.2 命名
使用`define`关键字进行命令
```scheme
(define size 2)
(define pi 3.1415926)
(define circumference (* 2 pi  10))
```
## 1.3 复合过程
自定义过程(`Procedure`), 具体的语法如下
```scheme
(define (<name> <formal parameter>)
<body>)
```
`<body>`也可以包含其他过程的定义，使之成为内部环境中的定义。
```scheme
(define (square x) (* x  x))
(square 2)
;; 4

(define (f a)
    (define (sum-of-square a b)
        (+ (square a) (square b)))
  (sum-of-square (+ a 1) (+ a 2)))
(f 2)
;; 25
```
## 1.4 条件表达式
`scheme` 中有两个条件表达式`cond`和`if`，使用方法分别如下
- `cond`

```scheme
(cond (<p1> <e1>)
          (<p2> <e2>)
          ...
          (<pn> <en>)
          (else <e>)
```
每一个预测分支`pi`如果为`true`则执行相应的表达式，如果一个预测条件没有达到则进入`else`分支中的表达式，注意`else`分支是可选的。
```scheme
(define (abs x)
    (cond ((> x 0) x)
              ((< x 0) (- x))
              (else 0)))
(abs 1)
;;1
(abs -2)
;;1
(abs 0)
;; 0
```
- `if`
```scheme
(if <predicate> <consequent> <alternative>)
```
如果`predicate`中为`true`，则执行`consequent`中语句，否则执行`alternative`语句。

## 1.4 布尔操作
布尔操作主要包含如下`not`, `and` 和 `or`，具体的操作逻辑和其他编程语言一样，而且对于`and`和`or`操作也存在 *短路效应*。

## 1.5 `let` 变量
使用`let`可以在过程中定义一些临时变量，方便代码书写， 语法如下：
```scheme
(let ((<var1> <exp1>)
      (<var2><exp2>)
        ...
      (<varn><expn>))
    <body>)
```

$f(x,y)=x(1+xy)^2 +y(1−y)+(1+xy)(1−y)$
```scheme
(define (f x y)
    (let ((a (+ 1 (* x y)))
           (b (- 1 y))
           (+ (* x (square a)) 
            
```